<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Plasma Hall of Fame</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white overflow-hidden">

<!-- Audio -->
<audio id="bgMusic" loop preload="auto">
    <source src="./interstellar.mp3" type="audio/mpeg">
</audio>

<div class="relative z-10 min-h-screen flex flex-col items-center justify-center px-4">

    <h1 class="text-5xl font-bold mb-6">⚡ PLASMA HALL OF FAME ⚡</h1>

    <!-- Input -->
    <div class="flex flex-col gap-4 items-center w-full max-w-md">
        <input id="usernameInput" placeholder="Twitter username" class="w-full p-3 rounded-xl text-black"/>
        <button id="submitBtn" class="w-full bg-purple-600 p-3 rounded-xl">Join the Hall</button>
    </div>

    <!-- Hall -->
    <div id="hallOfFame" class="grid grid-cols-3 gap-4 mt-8"></div>
</div>

<script>
const API_BASE = 'http://162.250.191.81:4000'; // Your backend
const usernameInput = document.getElementById('usernameInput');
const submitBtn = document.getElementById('submitBtn');
const hallOfFame = document.getElementById('hallOfFame');

// Add User Card
function addUserCard(username) {
    const profileUrl = `https://unavatar.io/twitter/${username}`;
    const card = document.createElement('div');
    card.className = 'p-4 bg-purple-800 rounded-xl text-center';
    card.innerHTML = `
        <img src="${profileUrl}" alt="@${username}" class="w-16 h-16 rounded-full mx-auto" onerror="this.src='plasma.jpg'" />
        <h3 class="mt-2">@${username}</h3>
    `;
    hallOfFame.appendChild(card);
}

// Load Users
async function loadUsers() {
    try {
        const res = await fetch(`${API_BASE}/users`);
        const users = await res.json();
        hallOfFame.innerHTML = '';
        users.forEach(u => addUserCard(u));
    } catch(e) {
        console.log('Failed to load users:', e);
    }
}

// Save User
async function saveUser(username) {
    try {
        const res = await fetch(`${API_BASE}/users`, {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({username})
        });
        if(res.ok) loadUsers();
    } catch(e) {
        console.log('Failed to save user:', e);
    }
}

// Submit
submitBtn.addEventListener('click', () => {
    const username = usernameInput.value.trim().replace('@','');
    if(!username) return alert('Enter username!');
    saveUser(username);
    usernameInput.value = '';
});

// Load on start
loadUsers();
</script>
</body>
</html>
