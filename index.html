<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Plasma Hall of Fame</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen text-white overflow-hidden relative" style="background: radial-gradient(ellipse at center, #0f3b2f 0%, #0a2f24 25%, #052519 50%, #021910 100%);">

<!-- Enhanced Background Effects -->
<div class="absolute inset-0 overflow-hidden">
    <!-- Stars -->
    <div class="stars absolute inset-0"></div>
    
    <!-- Central plasma portal -->
    <div class="plasma-portal absolute inset-0 flex items-center justify-center">
        <div class="portal-ring"></div>
        <div class="portal-core"></div>
    </div>
    
    <!-- Floating particles -->
    <div class="particles absolute inset-0"></div>
</div>

<!-- Header -->
<header class="relative z-10 text-center py-8">
    <h1 class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-200 via-green-300 to-green-400 mb-4 plasma-title">
        üïä PLASMA HALL OF FAME üïä
    </h1>
    <p class="text-green-100 text-xl font-light tracking-wider">Trillions of Digital Legends</p>
</header>

<!-- Stats -->
<div class="relative z-10 flex justify-center mb-8">
    <div class="plasma-stats bg-black/80 backdrop-blur-xl rounded-3xl px-8 py-4 border-2 border-green-400/60">
        <div id="userCount" class="text-green-200 font-bold text-xl flex items-center justify-center gap-3">
            <span class="text-2xl animate-bounce">üïä</span>
            <span>Loading legends...</span>
            <span class="text-2xl animate-bounce">üïä</span>
        </div>
    </div>
</div>

<!-- Input Section -->
<div class="relative z-10 flex flex-col items-center justify-center px-6 mb-8">
    <div class="flex items-center gap-6 max-w-4xl w-full mb-6">
        <input 
            type="text" 
            id="usernameInput" 
            placeholder="Enter Twitter/X username (without @)" 
            class="flex-1 px-8 py-4 rounded-xl text-gray-900 bg-white/98 focus:outline-none focus:ring-4 focus:ring-green-400/80 text-lg font-semibold"
        >
        <button 
            id="submitBtn" 
            class="px-10 py-4 bg-gradient-to-br from-green-400 via-green-500 to-green-600 hover:from-green-500 hover:via-green-600 hover:to-green-700 rounded-xl font-bold transition-all duration-300 text-lg shadow-xl hover:shadow-green-400/50 transform hover:scale-105"
        >
            üïä JOIN HALL üïä
        </button>
    </div>
    
    <div class="flex gap-6 mb-4">
        <button 
            id="refreshBtn" 
            class="px-6 py-3 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 rounded-lg font-semibold transition-all duration-300 shadow-lg transform hover:scale-105"
        >
            üîÑ Refresh Hall
        </button>
    </div>
    
    <div id="connectionStatus" class="text-center text-green-200 font-bold bg-black/70 backdrop-blur-xl rounded-xl px-6 py-3 border border-green-500/30">
        Connecting to Hall of Fame...
    </div>
</div>

<!-- Circular Hall of Fame Display -->
<div class="relative z-10 px-6">
    <div class="hall-container bg-black/60 backdrop-blur-xl rounded-3xl p-8 border-2 border-green-400/50 max-w-6xl mx-auto">
        <div class="circular-hall relative w-full h-96 overflow-hidden">
            <div id="circularDisplay" class="absolute inset-0 flex items-center justify-center">
                <!-- Users will be positioned in circle here -->
            </div>
        </div>
        
        <div class="text-center mt-6 text-green-300 font-bold">
            <span class="text-xl">üïä Spinning Hall of Legends üïä</span>
        </div>
    </div>
</div>

<style>
/* Title effects */
.plasma-title {
    text-shadow: 0 0 20px rgba(34, 197, 94, 0.8);
    animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
    0% { text-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
    100% { text-shadow: 0 0 30px rgba(34, 197, 94, 1); }
}

/* Background effects */
.stars {
    background-image: 
        radial-gradient(2px 2px at 20% 30%, rgba(34, 197, 94, 0.8), transparent),
        radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,0.9), transparent),
        radial-gradient(1px 1px at 60% 40%, rgba(16, 185, 129, 0.7), transparent),
        radial-gradient(1px 1px at 80% 80%, rgba(34, 197, 94, 0.9), transparent);
    background-size: 400px 300px, 300px 400px, 500px 200px, 200px 500px;
    animation: starsTwinkle 100s linear infinite;
}

@keyframes starsTwinkle {
    from { transform: translate(0, 0) rotate(0deg); }
    to { transform: translate(-100px, -50px) rotate(360deg); }
}

.portal-ring {
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, transparent, rgba(34, 197, 94, 0.3), transparent);
    animation: portalSpin 30s linear infinite;
    filter: blur(2px);
}

.portal-core {
    position: absolute;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(34, 197, 94, 0.5) 0%, transparent 70%);
    border-radius: 50%;
    animation: corePulse 4s ease-in-out infinite;
}

@keyframes portalSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes corePulse {
    0%, 100% { transform: scale(0.8); opacity: 0.5; }
    50% { transform: scale(1.2); opacity: 1; }
}

.particles {
    background-image: 
        radial-gradient(3px 3px at 25% 50%, rgba(34, 197, 94, 0.6), transparent),
        radial-gradient(2px 2px at 75% 25%, rgba(16, 185, 129, 0.8), transparent),
        radial-gradient(4px 4px at 50% 75%, rgba(5, 150, 105, 0.5), transparent);
    background-size: 800px 400px, 600px 600px, 400px 800px;
    animation: particleFloat 50s ease-in-out infinite;
}

@keyframes particleFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-50px) rotate(120deg); }
    66% { transform: translateY(30px) rotate(240deg); }
}

/* Circular Hall Styles */
.circular-hall {
    position: relative;
    border-radius: 50%;
    border: 2px solid rgba(34, 197, 94, 0.3);
    background: radial-gradient(circle, rgba(34, 197, 94, 0.05) 0%, transparent 70%);
}

.legend-card {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(34, 197, 94, 0.8);
    cursor: pointer;
    transition: all 0.3s ease;
    background: linear-gradient(135deg, #16a34a, #22c55e);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 24px;
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
}

.legend-card:hover {
    transform: scale(1.4);
    z-index: 20;
    border-color: #10b981;
    box-shadow: 0 0 40px rgba(34, 197, 94, 0.8);
}

.legend-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.legend-name {
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.9);
    color: #22c55e;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    border: 1px solid rgba(34, 197, 94, 0.6);
    white-space: nowrap;
    backdrop-filter: blur(10px);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.legend-card:hover .legend-name {
    opacity: 1;
}

/* Spinning animation */
.spinning-hall {
    animation: hallSpin 60s linear infinite;
}

@keyframes hallSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Stats card */
.plasma-stats {
    background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(6,78,59,0.4) 100%);
    box-shadow: 0 0 30px rgba(34, 197, 94, 0.2);
}

/* Success animations */
@keyframes successPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.success-animation {
    animation: successPulse 0.8s ease-in-out;
}
</style>

<script>
// Configuration
const CONFIG = {
    MAX_USERS: 20, // Limit for performance
    CIRCLE_RADIUS: 180,
    DEFAULT_USERS: ['proofofnathan', 'scene999', 'MaxApoz', 'shadowofthefax']
};

// DOM elements
const elements = {
    usernameInput: document.getElementById('usernameInput'),
    submitBtn: document.getElementById('submitBtn'),
    refreshBtn: document.getElementById('refreshBtn'),
    circularDisplay: document.getElementById('circularDisplay'),
    connectionStatus: document.getElementById('connectionStatus'),
    userCount: document.getElementById('userCount')
};

// Application state
let state = {
    allUsers: [...CONFIG.DEFAULT_USERS],
    isLoading: false
};

// SIMPLE and RELIABLE Avatar Loading
const avatarLoader = {
    // Only the most reliable sources
    sources: [
        (username) => `https://unavatar.io/twitter/${username}?size=80`,
        (username) => `https://github.com/${username}.png?size=80`,
        (username) => `https://unavatar.io/${username}?size=80`,
        (username) => `https://ui-avatars.com/api/?name=${username.charAt(0).toUpperCase()}&background=16a34a&color=fff&size=80&bold=true`
    ],
    
    load: async (username, imgElement, cardElement) => {
        console.log(`üñºÔ∏è Loading avatar for: ${username}`);
        
        // Show initial letter while loading
        cardElement.textContent = username.charAt(0).toUpperCase();
        
        for (let i = 0; i < avatarLoader.sources.length; i++) {
            try {
                const src = avatarLoader.sources[i](username);
                console.log(`  Trying source ${i + 1}: ${src}`);
                
                const success = await new Promise((resolve) => {
                    const timeout = setTimeout(() => resolve(false), 3000);
                    
                    imgElement.onload = () => {
                        clearTimeout(timeout);
                        console.log(`  ‚úÖ Success for ${username}`);
                        cardElement.textContent = '';
                        imgElement.style.display = 'block';
                        resolve(true);
                    };
                    
                    imgElement.onerror = () => {
                        clearTimeout(timeout);
                        console.log(`  ‚ùå Failed for ${username}`);
                        resolve(false);
                    };
                    
                    imgElement.src = src;
                });
                
                if (success) return true;
                
            } catch (error) {
                console.log(`  ‚ùå Error: ${error.message}`);
            }
        }
        
        // Keep letter avatar if all fail
        console.log(`‚ùå All sources failed for ${username}, keeping letter avatar`);
        return false;
    }
};

// Create Legend Card
const createLegendCard = (username, index, total) => {
    const card = document.createElement('div');
    card.className = 'legend-card';
    
    // Calculate position on circle
    const angle = (index / total) * 2 * Math.PI;
    const x = Math.cos(angle) * CONFIG.CIRCLE_RADIUS;
    const y = Math.sin(angle) * CONFIG.CIRCLE_RADIUS;
    
    card.style.left = `calc(50% + ${x}px - 40px)`;
    card.style.top = `calc(50% + ${y}px - 40px)`;
    
    // Initial letter display
    card.textContent = username.charAt(0).toUpperCase();
    
    // Create image element
    const img = document.createElement('img');
    img.className = 'legend-img';
    img.alt = username;
    img.style.display = 'none';
    
    // Create name label
    const nameLabel = document.createElement('div');
    nameLabel.className = 'legend-name';
    nameLabel.textContent = `@${username}`;
    
    card.appendChild(img);
    card.appendChild(nameLabel);
    
    // Click to open Twitter
    card.addEventListener('click', () => {
        window.open(`https://twitter.com/${username}`, '_blank');
        card.style.transform = 'scale(0.95)';
        setTimeout(() => card.style.transform = '', 150);
    });
    
    // Load avatar
    avatarLoader.load(username, img, card);
    
    return card;
};

// Display Hall of Fame
const displayHall = () => {
    console.log('üéØ Updating Hall of Fame display');
    
    elements.circularDisplay.innerHTML = '';
    elements.circularDisplay.classList.add('spinning-hall');
    
    // Update counter
    elements.userCount.innerHTML = `
        <span class="text-2xl animate-bounce">üïä</span>
        <span>${state.allUsers.length} Legends in Hall</span>
        <span class="text-2xl animate-bounce">üïä</span>
    `;
    
    // Create cards for each user
    state.allUsers.slice(0, CONFIG.MAX_USERS).forEach((username, index) => {
        const card = createLegendCard(username, index, Math.min(state.allUsers.length, CONFIG.MAX_USERS));
        elements.circularDisplay.appendChild(card);
    });
};

// Utility functions
const utils = {
    cleanUsername: (username) => {
        return username.replace('@', '').replace(/[^a-zA-Z0-9_]/g, '').toLowerCase();
    },
    
    validateUsername: (username) => {
        const clean = utils.cleanUsername(username);
        if (!clean || clean.length < 1) return { valid: false, message: 'Please enter a username' };
        if (clean.length > 15) return { valid: false, message: 'Username too long' };
        if (state.allUsers.includes(clean)) return { valid: false, message: 'Already in Hall of Fame! üïä' };
        return { valid: true, username: clean };
    },
    
    updateStatus: (message, type = 'info') => {
        elements.connectionStatus.textContent = message;
        elements.connectionStatus.className = `text-center font-bold bg-black/70 backdrop-blur-xl rounded-xl px-6 py-3 border border-green-500/30 ${
            type === 'success' ? 'text-green-200' : 
            type === 'error' ? 'text-red-300' : 
            type === 'warning' ? 'text-yellow-300' : 'text-green-200'
        }`;
    }
};

// Storage functions
const storage = {
    save: () => {
        try {
            localStorage.setItem('hall_of_fame_users', JSON.stringify(state.allUsers));
            console.log('üíæ Saved to localStorage');
        } catch (error) {
            console.error('‚ùå Storage save failed:', error);
        }
    },
    
    load: () => {
        try {
            const saved = localStorage.getItem('hall_of_fame_users');
            if (saved) {
                const users = JSON.parse(saved);
                state.allUsers = [...new Set([...CONFIG.DEFAULT_USERS, ...users])];
                console.log('üì¶ Loaded from localStorage:', state.allUsers.length);
            }
        } catch (error) {
            console.error('‚ùå Storage load failed:', error);
        }
    }
};

// Submit new user
const submitUser = async (username) => {
    const validation = utils.validateUsername(username);
    
    if (!validation.valid) {
        alert(validation.message);
        return;
    }
    
    if (state.isLoading) return;
    state.isLoading = true;
    
    const cleanUsername = validation.username;
    console.log('üöÄ Adding to Hall of Fame:', cleanUsername);
    
    // UI feedback
    elements.submitBtn.disabled = true;
    elements.submitBtn.innerHTML = 'üïä JOINING HALL üïä';
    utils.updateStatus('üåü Adding legend to hall...', 'info');
    
    // Add to state
    state.allUsers.push(cleanUsername);
    storage.save();
    
    // Update display
    displayHall();
    
    // Success feedback
    elements.usernameInput.value = '';
    elements.submitBtn.classList.add('success-animation');
    utils.updateStatus('‚úÖ Welcome to the Hall of Fame! üïä', 'success');
    
    setTimeout(() => {
        elements.submitBtn.disabled = false;
        elements.submitBtn.innerHTML = 'üïä JOIN HALL üïä';
        elements.submitBtn.classList.remove('success-animation');
        utils.updateStatus('‚úÖ Hall of Fame ready üïä', 'success');
        state.isLoading = false;
    }, 3000);
    
    console.log('‚ú® Successfully added to Hall of Fame');
};

// Event listeners
const setupEvents = () => {
    elements.submitBtn.addEventListener('click', () => {
        const username = elements.usernameInput.value.trim();
        if (username) submitUser(username);
    });
    
    elements.usernameInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !elements.submitBtn.disabled) {
            const username = elements.usernameInput.value.trim();
            if (username) submitUser(username);
        }
    });
    
    elements.usernameInput.addEventListener('input', (e) => {
        const value = e.target.value;
        const clean = value.replace('@', '').replace(/[^a-zA-Z0-9_]/g, '');
        if (value !== clean) e.target.value = clean;
    });
    
    elements.refreshBtn.addEventListener('click', () => {
        elements.refreshBtn.disabled = true;
        elements.refreshBtn.innerHTML = 'üîÑ Refreshing...';
        
        displayHall();
        
        setTimeout(() => {
            elements.refreshBtn.disabled = false;
            elements.refreshBtn.innerHTML = 'üîÑ Refresh Hall';
            utils.updateStatus('‚úÖ Hall of Fame refreshed! üïä', 'success');
        }, 2000);
    });
};

// Initialize
const init = () => {
    console.log('üöÄ Initializing Plasma Hall of Fame...');
    
    setupEvents();
    storage.load();
    
    utils.updateStatus('üåü Loading Hall of Fame...', 'info');
    
    // Initial display
    displayHall();
    
    setTimeout(() => {
        utils.updateStatus('‚úÖ Hall of Fame ready üïä', 'success');
    }, 1500);
    
    console.log('‚ú® Hall of Fame ready!');
    console.log(`üë• Total legends: ${state.allUsers.length}`);
    console.log('üñºÔ∏è Simplified avatar loading system active');
    console.log('üåÄ Circular spinning display like Interstellar');
};

// Start the application
init();
</script>

</body>
</html>
