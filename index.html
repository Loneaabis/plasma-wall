<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Plasma Hall of Fame</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen text-white overflow-hidden relative" style="background: radial-gradient(ellipse at center, #0f3b2f 0%, #0a2f24 25%, #052519 50%, #021910 100%);">

<!-- Enhanced Background Effects -->
<div class="absolute inset-0 overflow-hidden">
    <!-- Stars -->
    <div class="stars absolute inset-0"></div>
    
    <!-- Central plasma portal -->
    <div class="plasma-portal absolute inset-0 flex items-center justify-center">
        <div class="portal-ring"></div>
        <div class="portal-core"></div>
    </div>
    
    <!-- Floating particles -->
    <div class="particles absolute inset-0"></div>
</div>

<!-- Header -->
<header class="relative z-10 text-center py-8">
    <h1 class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-200 via-green-300 to-green-400 mb-4 plasma-title">
        🕊 PLASMA HALL OF FAME 🕊
    </h1>
    <p class="text-green-100 text-xl font-light tracking-wider">Trillions of Digital Legends</p>
</header>

<!-- Stats -->
<div class="relative z-10 flex justify-center mb-8">
    <div class="plasma-stats bg-black/80 backdrop-blur-xl rounded-3xl px-8 py-4 border-2 border-green-400/60">
        <div id="userCount" class="text-green-200 font-bold text-xl flex items-center justify-center gap-3">
            <span class="text-2xl animate-bounce">🕊</span>
            <span>Loading legends...</span>
            <span class="text-2xl animate-bounce">🕊</span>
        </div>
    </div>
</div>

<!-- Audio -->
<audio id="bgMusic" loop preload="auto" style="display: none;">
    <source src="./interstellar.mp3" type="audio/mpeg">
    <source src="./interstellar.wav" type="audio/wav">
    <source src="./music.mp3" type="audio/mpeg">
</audio>

<!-- Input Section -->
<div class="relative z-10 flex flex-col items-center justify-center px-6 mb-8">
    <div class="flex items-center gap-6 max-w-4xl w-full mb-6">
        <input 
            type="text" 
            id="usernameInput" 
            placeholder="Enter Twitter/X username (without @)" 
            class="flex-1 px-8 py-4 rounded-xl text-gray-900 bg-white/98 focus:outline-none focus:ring-4 focus:ring-green-400/80 text-lg font-semibold"
        >
        <button 
            id="submitBtn" 
            class="px-10 py-4 bg-gradient-to-br from-green-400 via-green-500 to-green-600 hover:from-green-500 hover:via-green-600 hover:to-green-700 rounded-xl font-bold transition-all duration-300 text-lg shadow-xl hover:shadow-green-400/50 transform hover:scale-105"
        >
            🕊 JOIN HALL 🕊
        </button>
    </div>
    
    <div class="flex gap-6 mb-4">
        <button 
            id="musicToggle" 
            class="px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 rounded-lg font-semibold transition-all duration-300 shadow-lg transform hover:scale-105"
        >
            🎵 Cosmic Soundtrack
        </button>
        
        <button 
            id="refreshBtn" 
            class="px-6 py-3 bg-gradient-to-r from-teal-600 to-teal-700 hover:from-teal-700 hover:to-teal-800 rounded-lg font-semibold transition-all duration-300 shadow-lg transform hover:scale-105"
        >
            🔄 Refresh Hall
        </button>
    </div>
    
    <div id="connectionStatus" class="text-center text-green-200 font-bold bg-black/70 backdrop-blur-xl rounded-xl px-6 py-3 border border-green-500/30">
        Connecting to Hall of Fame...
    </div>
</div>

<!-- Circular Hall of Fame Display - CENTERED -->
<div class="relative z-10 px-6 mb-12">
    <div class="hall-container bg-black/70 backdrop-blur-xl rounded-3xl p-12 border-3 border-green-400/60 max-w-4xl mx-auto">
        <div class="circular-hall relative w-full mx-auto overflow-visible" style="height: 500px;">
            <div id="circularDisplay" class="absolute inset-0 flex items-center justify-center">
                <!-- Users will be positioned in circle here -->
            </div>
            
            <!-- Center indicator -->
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-green-400/30 rounded-full border-2 border-green-400/60 animate-pulse"></div>
        </div>
        
        <div class="text-center mt-8 text-green-300 font-bold">
            <span class="text-xl">🕊 Spinning Hall of Legends 🕊</span>
        </div>
    </div>
</div>

<style>
/* Title effects */
.plasma-title {
    text-shadow: 0 0 20px rgba(34, 197, 94, 0.8);
    animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
    0% { text-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
    100% { text-shadow: 0 0 30px rgba(34, 197, 94, 1); }
}

/* Background effects */
.stars {
    background-image: 
        radial-gradient(2px 2px at 20% 30%, rgba(34, 197, 94, 0.8), transparent),
        radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,0.9), transparent),
        radial-gradient(1px 1px at 60% 40%, rgba(16, 185, 129, 0.7), transparent),
        radial-gradient(1px 1px at 80% 80%, rgba(34, 197, 94, 0.9), transparent);
    background-size: 400px 300px, 300px 400px, 500px 200px, 200px 500px;
    animation: starsTwinkle 100s linear infinite;
}

@keyframes starsTwinkle {
    from { transform: translate(0, 0) rotate(0deg); }
    to { transform: translate(-100px, -50px) rotate(360deg); }
}

.portal-ring {
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: conic-gradient(from 0deg, transparent, rgba(34, 197, 94, 0.3), transparent);
    animation: portalSpin 30s linear infinite;
    filter: blur(2px);
}

.portal-core {
    position: absolute;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(34, 197, 94, 0.5) 0%, transparent 70%);
    border-radius: 50%;
    animation: corePulse 4s ease-in-out infinite;
}

@keyframes portalSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes corePulse {
    0%, 100% { transform: scale(0.8); opacity: 0.5; }
    50% { transform: scale(1.2); opacity: 1; }
}

.particles {
    background-image: 
        radial-gradient(3px 3px at 25% 50%, rgba(34, 197, 94, 0.6), transparent),
        radial-gradient(2px 2px at 75% 25%, rgba(16, 185, 129, 0.8), transparent),
        radial-gradient(4px 4px at 50% 75%, rgba(5, 150, 105, 0.5), transparent);
    background-size: 800px 400px, 600px 600px, 400px 800px;
    animation: particleFloat 50s ease-in-out infinite;
}

@keyframes particleFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-50px) rotate(120deg); }
    66% { transform: translateY(30px) rotate(240deg); }
}

/* Circular Hall Styles - BETTER CENTERED */
.circular-hall {
    position: relative;
    border-radius: 50%;
    border: 3px solid rgba(34, 197, 94, 0.5);
    background: radial-gradient(circle, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 50%, transparent 80%);
    box-shadow: 
        inset 0 0 50px rgba(34, 197, 94, 0.1),
        0 0 30px rgba(34, 197, 94, 0.2);
}

.legend-card {
    position: absolute;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    overflow: hidden;
    border: 4px solid rgba(34, 197, 94, 0.9);
    cursor: pointer;
    transition: all 0.4s ease;
    background: linear-gradient(135deg, #16a34a, #22c55e);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 28px;
    box-shadow: 
        0 0 25px rgba(34, 197, 94, 0.5),
        0 8px 20px rgba(0, 0, 0, 0.3);
    transform-origin: center center;
}

.legend-card:hover {
    transform: scale(1.5);
    z-index: 30;
    border-color: #10b981;
    box-shadow: 
        0 0 50px rgba(34, 197, 94, 0.9),
        0 15px 35px rgba(0, 0, 0, 0.4);
}

.legend-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.legend-img.loaded {
    opacity: 1;
}

.legend-name {
    position: absolute;
    bottom: -35px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.95);
    color: #22c55e;
    padding: 6px 16px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: bold;
    border: 2px solid rgba(34, 197, 94, 0.7);
    white-space: nowrap;
    backdrop-filter: blur(15px);
    opacity: 0;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.legend-card:hover .legend-name {
    opacity: 1;
}

/* Spinning animation */
.spinning-hall {
    animation: hallSpin 60s linear infinite;
}

@keyframes hallSpin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Stats card */
.plasma-stats {
    background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(6,78,59,0.4) 100%);
    box-shadow: 0 0 30px rgba(34, 197, 94, 0.2);
}

/* Success animations */
@keyframes successPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.success-animation {
    animation: successPulse 0.8s ease-in-out;
}
</style>

<script>
// Configuration
const CONFIG = {
    MAX_USERS: 20, // Limit for performance
    CIRCLE_RADIUS: 180,
    DEFAULT_USERS: ['proofofnathan', 'scene999', 'MaxApoz', 'shadowofthefax']
};

// DOM elements
const elements = {
    usernameInput: document.getElementById('usernameInput'),
    submitBtn: document.getElementById('submitBtn'),
    refreshBtn: document.getElementById('refreshBtn'),
    musicToggle: document.getElementById('musicToggle'),
    bgMusic: document.getElementById('bgMusic'),
    circularDisplay: document.getElementById('circularDisplay'),
    connectionStatus: document.getElementById('connectionStatus'),
    userCount: document.getElementById('userCount')
};

// Application state
let state = {
    allUsers: [...CONFIG.DEFAULT_USERS],
    isLoading: false,
    musicPlaying: false
};

// COMPLETELY NEW Avatar Loading System - DETECTS GREEN PLACEHOLDERS
const avatarLoader = {
    // More diverse sources with different approaches
    sources: [
        // Twitter direct approaches
        (username) => `https://pbs.twimg.com/profile_images/${username}_400x400.jpg`,
        (username) => `https://twitter.com/${username}/profile_image?size=original`,
        (username) => `https://unavatar.io/twitter/${username}?fallback=false`,
        
        // GitHub (many devs use same username)
        (username) => `https://github.com/${username}.png?size=100`,
        (username) => `https://avatars.githubusercontent.com/${username}?s=100`,
        
        // Other platforms
        (username) => `https://unavatar.io/instagram/${username}?fallback=false`,
        (username) => `https://unavatar.io/${username}?fallback=false`,
        
        // Gravatar attempt
        (username) => `https://www.gravatar.com/avatar/${username}?s=100&d=404`,
        
        // Last resort - good quality generated avatars
        (username) => `https://api.dicebear.com/7.x/personas/png?seed=${username}&size=100&backgroundColor=transparent`,
        (username) => `https://robohash.org/${username}?size=100x100&set=set4`
    ],
    
    load: async (username, imgElement, cardElement) => {
        console.log(`🖼️ LOADING AVATAR FOR: ${username.toUpperCase()}`);
        
        // Show letter initially
        cardElement.textContent = username.charAt(0).toUpperCase();
        imgElement.style.display = 'none';
        
        for (let i = 0; i < avatarLoader.sources.length; i++) {
            const src = avatarLoader.sources[i](username);
            console.log(`  🔄 TRYING SOURCE ${i + 1}/${avatarLoader.sources.length}`);
            
            try {
                const success = await avatarLoader.testAndValidateImage(src, imgElement, cardElement, username, i + 1);
                if (success) {
                    console.log(`  ✅ SUCCESS! Real avatar loaded for ${username} from source ${i + 1}`);
                    return true;
                }
            } catch (error) {
                console.log(`  ❌ Source ${i + 1} failed: ${error.message}`);
            }
            
            // Small delay between attempts
            await new Promise(resolve => setTimeout(resolve, 200));
        }
        
        console.log(`⚠️ All sources failed for ${username}, keeping letter avatar`);
        return false;
    },
    
    testAndValidateImage: (src, imgElement, cardElement, username, sourceNum) => {
        return new Promise((resolve) => {
            const timeout = setTimeout(() => {
                console.log(`    ⏰ TIMEOUT for ${username} source ${sourceNum}`);
                resolve(false);
            }, 5000); // Longer timeout
            
            const testImg = new Image();
            testImg.crossOrigin = 'anonymous';
            
            testImg.onload = function() {
                clearTimeout(timeout);
                
                // Check if it's a valid, real image
                if (this.naturalWidth < 20 || this.naturalHeight < 20) {
                    console.log(`    ❌ TOO SMALL: ${this.naturalWidth}x${this.naturalHeight} for ${username}`);
                    resolve(false);
                    return;
                }
                
                console.log(`    🔍 ANALYZING IMAGE: ${this.naturalWidth}x${this.naturalHeight} for ${username}`);
                
                // Create a canvas to analyze the image colors
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = this.naturalWidth;
                canvas.height = this.naturalHeight;
                
                try {
                    ctx.drawImage(this, 0, 0);
                    
                    // Sample pixels to detect if it's mostly green/placeholder
                    const isRealImage = avatarLoader.validateImageContent(ctx, canvas.width, canvas.height, username);
                    
                    if (isRealImage) {
                        console.log(`    ✅ REAL IMAGE DETECTED for ${username}`);
                        
                        // Success! Update the actual display
                        imgElement.src = src;
                        imgElement.onload = () => {
                            cardElement.textContent = ''; // Remove letter
                            imgElement.classList.add('loaded');
                            imgElement.style.display = 'block';
                            console.log(`    🎉 DISPLAYED real avatar for ${username}`);
                        };
                        resolve(true);
                    } else {
                        console.log(`    ❌ PLACEHOLDER/GREEN IMAGE detected for ${username}`);
                        resolve(false);
                    }
                    
                } catch (canvasError) {
                    console.log(`    ⚠️ CANVAS ERROR (CORS?): ${canvasError.message} - accepting image anyway`);
                    // If we can't analyze due to CORS, assume it's good since it loaded
                    imgElement.src = src;
                    imgElement.onload = () => {
                        cardElement.textContent = '';
                        imgElement.classList.add('loaded');
                        imgElement.style.display = 'block';
                        console.log(`    🎉 DISPLAYED avatar for ${username} (CORS bypass)`);
                    };
                    resolve(true);
                }
            };
            
            testImg.onerror = function() {
                clearTimeout(timeout);
                console.log(`    ❌ LOAD ERROR for ${username} source ${sourceNum}`);
                resolve(false);
            };
            
            testImg.src = src;
        });
    },
    
    validateImageContent: (ctx, width, height, username) => {
        try {
            // Sample multiple points across the image
            const samplePoints = [
                [width * 0.25, height * 0.25],
                [width * 0.75, height * 0.25],
                [width * 0.5, height * 0.5],
                [width * 0.25, height * 0.75],
                [width * 0.75, height * 0.75]
            ];
            
            let greenPixels = 0;
            let totalPixels = 0;
            let colorVariation = 0;
            
            const colors = [];
            
            for (const [x, y] of samplePoints) {
                const imageData = ctx.getImageData(Math.floor(x), Math.floor(y), 1, 1);
                const [r, g, b, a] = imageData.data;
                
                if (a > 0) { // Not transparent
                    totalPixels++;
                    colors.push([r, g, b]);
                    
                    // Check if pixel is greenish (like website color)
                    if (g > r + 20 && g > b + 20) {
                        greenPixels++;
                    }
                    
                    // Calculate color variation
                    const brightness = (r + g + b) / 3;
                    colorVariation += Math.abs(brightness - 128);
                }
            }
            
            const greenRatio = greenPixels / Math.max(totalPixels, 1);
            const avgVariation = colorVariation / Math.max(totalPixels, 1);
            
            console.log(`    📊 ANALYSIS for ${username}: ${greenPixels}/${totalPixels} green pixels (${(greenRatio * 100).toFixed(1)}%), variation: ${avgVariation.toFixed(1)}`);
            
            // Reject if too many green pixels or too little variation (solid color)
            if (greenRatio > 0.6) {
                console.log(`    ❌ TOO GREEN: ${(greenRatio * 100).toFixed(1)}% green pixels`);
                return false;
            }
            
            if (avgVariation < 20 && totalPixels > 2) {
                console.log(`    ❌ TOO UNIFORM: variation only ${avgVariation.toFixed(1)}`);
                return false;
            }
            
            return true;
            
        } catch (error) {
            console.log(`    ⚠️ VALIDATION ERROR: ${error.message} - assuming valid`);
            return true; // If we can't validate, assume it's good
        }
    }
};

// Create Legend Card - LARGER AND BETTER POSITIONED
const createLegendCard = (username, index, total) => {
    const card = document.createElement('div');
    card.className = 'legend-card';
    
    // Calculate position on circle - BIGGER RADIUS for better spacing
    const angle = (index / total) * 2 * Math.PI;
    const radius = 220; // Increased from 180
    const x = Math.cos(angle) * radius;
    const y = Math.sin(angle) * radius;
    
    // Position the card (accounting for card size of 100px = 50px from center)
    card.style.left = `calc(50% + ${x}px - 50px)`;
    card.style.top = `calc(50% + ${y}px - 50px)`;
    
    // Initial letter display
    card.textContent = username.charAt(0).toUpperCase();
    
    // Create image element with better settings
    const img = document.createElement('img');
    img.className = 'legend-img';
    img.alt = username;
    img.style.display = 'none';
    img.loading = 'eager'; // Load immediately
    
    // Create name label
    const nameLabel = document.createElement('div');
    nameLabel.className = 'legend-name';
    nameLabel.textContent = `@${username}`;
    
    card.appendChild(img);
    card.appendChild(nameLabel);
    
    // Click to open Twitter
    card.addEventListener('click', () => {
        window.open(`https://twitter.com/${username}`, '_blank');
        card.style.transform = 'scale(0.9)';
        setTimeout(() => card.style.transform = '', 200);
    });
    
    // Start loading avatar immediately
    console.log(`🎯 CREATING CARD FOR: ${username}`);
    avatarLoader.load(username, img, card);
    
    return card;
};

// Display Hall of Fame
const displayHall = () => {
    console.log('🎯 Updating Hall of Fame display');
    
    elements.circularDisplay.innerHTML = '';
    elements.circularDisplay.classList.add('spinning-hall');
    
    // Update counter
    elements.userCount.innerHTML = `
        <span class="text-2xl animate-bounce">🕊</span>
        <span>${state.allUsers.length} Legends in Hall</span>
        <span class="text-2xl animate-bounce">🕊</span>
    `;
    
    // Create cards for each user
    state.allUsers.slice(0, CONFIG.MAX_USERS).forEach((username, index) => {
        const card = createLegendCard(username, index, Math.min(state.allUsers.length, CONFIG.MAX_USERS));
        elements.circularDisplay.appendChild(card);
    });
};

// Utility functions
const utils = {
    cleanUsername: (username) => {
        return username.replace('@', '').replace(/[^a-zA-Z0-9_]/g, '').toLowerCase();
    },
    
    validateUsername: (username) => {
        const clean = utils.cleanUsername(username);
        if (!clean || clean.length < 1) return { valid: false, message: 'Please enter a username' };
        if (clean.length > 15) return { valid: false, message: 'Username too long' };
        if (state.allUsers.includes(clean)) return { valid: false, message: 'Already in Hall of Fame! 🕊' };
        return { valid: true, username: clean };
    },
    
    updateStatus: (message, type = 'info') => {
        elements.connectionStatus.textContent = message;
        elements.connectionStatus.className = `text-center font-bold bg-black/70 backdrop-blur-xl rounded-xl px-6 py-3 border border-green-500/30 ${
            type === 'success' ? 'text-green-200' : 
            type === 'error' ? 'text-red-300' : 
            type === 'warning' ? 'text-yellow-300' : 'text-green-200'
        }`;
    }
};

// Storage functions
const storage = {
    save: () => {
        try {
            localStorage.setItem('hall_of_fame_users', JSON.stringify(state.allUsers));
            console.log('💾 Saved to localStorage');
        } catch (error) {
            console.error('❌ Storage save failed:', error);
        }
    },
    
    load: () => {
        try {
            const saved = localStorage.getItem('hall_of_fame_users');
            if (saved) {
                const users = JSON.parse(saved);
                state.allUsers = [...new Set([...CONFIG.DEFAULT_USERS, ...users])];
                console.log('📦 Loaded from localStorage:', state.allUsers.length);
            }
        } catch (error) {
            console.error('❌ Storage load failed:', error);
        }
    }
};

// Submit new user
const submitUser = async (username) => {
    const validation = utils.validateUsername(username);
    
    if (!validation.valid) {
        alert(validation.message);
        return;
    }
    
    if (state.isLoading) return;
    state.isLoading = true;
    
    const cleanUsername = validation.username;
    console.log('🚀 Adding to Hall of Fame:', cleanUsername);
    
    // UI feedback
    elements.submitBtn.disabled = true;
    elements.submitBtn.innerHTML = '🕊 JOINING HALL 🕊';
    utils.updateStatus('🌟 Adding legend to hall...', 'info');
    
    // Add to state
    state.allUsers.push(cleanUsername);
    storage.save();
    
    // Update display
    displayHall();
    
    // Success feedback
    elements.usernameInput.value = '';
    elements.submitBtn.classList.add('success-animation');
    utils.updateStatus('✅ Welcome to the Hall of Fame! 🕊', 'success');
    
    setTimeout(() => {
        elements.submitBtn.disabled = false;
        elements.submitBtn.innerHTML = '🕊 JOIN HALL 🕊';
        elements.submitBtn.classList.remove('success-animation');
        utils.updateStatus('✅ Hall of Fame ready 🕊', 'success');
        state.isLoading = false;
    }, 3000);
    
    console.log('✨ Successfully added to Hall of Fame');
};

// Event listeners
const setupEvents = () => {
    elements.submitBtn.addEventListener('click', () => {
        const username = elements.usernameInput.value.trim();
        if (username) submitUser(username);
    });
    
    elements.usernameInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !elements.submitBtn.disabled) {
            const username = elements.usernameInput.value.trim();
            if (username) submitUser(username);
        }
    });
    
    elements.usernameInput.addEventListener('input', (e) => {
        const value = e.target.value;
        const clean = value.replace('@', '').replace(/[^a-zA-Z0-9_]/g, '');
        if (value !== clean) e.target.value = clean;
    });
    
    // Music toggle functionality
    elements.musicToggle.addEventListener('click', async () => {
        try {
            if (state.musicPlaying) {
                elements.bgMusic.pause();
                elements.musicToggle.innerHTML = '🎵 Cosmic Soundtrack';
                state.musicPlaying = false;
                console.log('🔇 Music paused');
            } else {
                elements.bgMusic.volume = 0.3;
                await elements.bgMusic.play();
                elements.musicToggle.innerHTML = '🔇 Stop Music';
                state.musicPlaying = true;
                console.log('🎵 Music playing');
            }
        } catch (error) {
            console.error('❌ Music error:', error);
            utils.updateStatus('⚠️ Music files not found', 'warning');
            setTimeout(() => utils.updateStatus('✅ Hall of Fame ready 🕊', 'success'), 3000);
        }
    });
    
    elements.refreshBtn.addEventListener('click', () => {
        elements.refreshBtn.disabled = true;
        elements.refreshBtn.innerHTML = '🔄 Refreshing...';
        
        displayHall();
        
        setTimeout(() => {
            elements.refreshBtn.disabled = false;
            elements.refreshBtn.innerHTML = '🔄 Refresh Hall';
            utils.updateStatus('✅ Hall of Fame refreshed! 🕊', 'success');
        }, 2000);
    });
};

// Initialize
const init = () => {
    console.log('🚀 Initializing Plasma Hall of Fame...');
    
    setupEvents();
    storage.load();
    
    utils.updateStatus('🌟 Loading Hall of Fame...', 'info');
    
    // Initial display
    displayHall();
    
    setTimeout(() => {
        utils.updateStatus('✅ Hall of Fame ready 🕊', 'success');
    }, 1500);
    
    console.log('✨ Hall of Fame ready!');
    console.log(`👥 Total legends: ${state.allUsers.length}`);
    console.log('🖼️ Simplified avatar loading system active');
    console.log('🌀 Circular spinning display like Interstellar');
};

// Start the application
init();
</script>

</body>
</html>
